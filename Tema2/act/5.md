![](/.resGen/_bannerD.png#gh-dark-mode-only)
![](/.resGen/_bannerL.png#gh-light-mode-only)

<a href="/Tema2/readme.md"><img src="/.resGen/_back.svg" width="52.5"></a>

<a href="4.md"><img src="/.resGen/_arrow_r.svg" width="30"></a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="6.md"><img src="/.resGen/_arrow.svg" width="30"></a>
<a href="5.1.md"><img src="/.resGen/_notes.svg" width="30" align="right"></a>

---

# Configuraci√≥n de BIND9 como Servidor Cach√© y Forwarding

## Introducci√≥n
BIND9 (Berkeley Internet Name Domain) es uno de los servidores DNS m√°s utilizados en sistemas Linux. Se puede configurar para trabajar como un **servidor cach√©** (almacena respuestas de consultas para mejorar el rendimiento) o como un **servidor forwarding** (reenv√≠a las consultas a otros servidores DNS). En este documento, aprender√°s c√≥mo instalar y configurar BIND9 en Ubuntu.

### **Enlaces de referencia**
- [Gu√≠a de DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-configure-bind-as-a-caching-or-forwarding-dns-server-on-ubuntu-16-04)
- [Documentaci√≥n de Zytrax](http://www.zytrax.com/books/dns/ch4/)
- [Gu√≠a de Ubuntu](https://help.ubuntu.com/community/BIND9ServerHowto)
- [Libro Pro DNS and BIND (Cap√≠tulo 4)](http://it-ebooks.info/book/5022/)

---

## **Paso 1: Instalar BIND9**
1. Abre una terminal y actualiza los paquetes:
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```
2. Instala BIND9:
   ```bash
   sudo apt install bind9 -y
   ```
3. Verifica que el servicio est√° en ejecuci√≥n:
   ```bash
   systemctl status bind9
   ```
   Si no est√° en ejecuci√≥n, in√≠cialo con:
   ```bash
   sudo systemctl start bind9
   sudo systemctl enable bind9
   ```

---

## **Paso 2: Configurar BIND9 como Servidor Cach√©**

### **1. Editar la configuraci√≥n de BIND9**
Edita el archivo de configuraci√≥n:
```bash
sudo nano /etc/bind/named.conf.options
```
Modifica el contenido para que quede as√≠:
```bash
options {
    directory "/var/cache/bind";
    
    recursion yes;
    allow-recursion { any; };
    listen-on { any; };
    forwarders {};  
    dnssec-validation auto;
    
    listen-on-v6 { any; };
};
```
Guarda y cierra el archivo.

### **2. Comprobar la sintaxis**
```bash
sudo named-checkconf
```
Si no hay errores, contin√∫a.

### **3. Reiniciar BIND9**
```bash
sudo systemctl restart bind9
```
Verifica que est√° funcionando:
```bash
systemctl status bind9
```

### **4. Verificar que responde correctamente**
Prueba resolviendo un dominio:
```bash
nslookup google.com 127.0.0.1
```
Si devuelve una respuesta con la IP de Google, el servidor cach√© est√° funcionando.

Revisa el log:
```bash
sudo tail -f /var/log/syslog
```

---

## **Paso 3: Configurar BIND9 como Servidor Forwarding**

### **1. Editar la configuraci√≥n**
Edita el archivo:
```bash
sudo nano /etc/bind/named.conf.options
```
Modifica la secci√≥n `options` para usar servidores DNS externos (por ejemplo, Google y Cloudflare):
```bash
options {
    directory "/var/cache/bind";

    recursion yes;
    allow-recursion { any; };
    forward only;
    forwarders {
        8.8.8.8;
        8.8.4.4;
        1.1.1.1;
    };

    dnssec-validation auto;
    
    listen-on { any; };
    listen-on-v6 { any; };
};
```
Guarda y cierra el archivo.

### **2. Comprobar la sintaxis**
```bash
sudo named-checkconf
```
Si no hay errores, contin√∫a.

### **3. Reiniciar BIND9**
```bash
sudo systemctl restart bind9
```
Verifica el estado:
```bash
systemctl status bind9
```

### **4. Probar el servidor Forwarding**
Realiza una consulta DNS:
```bash
nslookup facebook.com 127.0.0.1
```
Si devuelve una IP correctamente, el servidor est√° funcionando.

Revisa el log:
```bash
sudo tail -f /var/log/syslog
```

---

## **Conclusi√≥n**
Has configurado BIND9 como:
‚úÖ **Servidor Cach√©**
‚úÖ **Servidor Forwarding**

Ahora puedes usarlo para optimizar las consultas DNS en tu red. üöÄ

